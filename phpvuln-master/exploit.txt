In order to prevent an exploit like this from working, the best thing you can do is assume that anything a user can upload is dangerous. In doing this you would disallow any file types except
for the one you are explicitly looking for. Beyond this, since files can be hidden or disguised as other file types, you should never allow a user to access the uploads in a way that calls them.
One thing you could do is allow for plaintext or encoded viewing of an uploaded file so that no code is actually run.
